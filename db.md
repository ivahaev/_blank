# $db

### $db.Get
Метод $db.Get() возвращает объект из хранилища. 

**Синтаксис**  

```
$db.Get(_id[, store])
```  

**Параметры**

**_id**   
    Идентификатор объекта (строка)  
**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище. Для получения объекта из вложенного хранилища, используется следующий синтаксис: `[store].nestedStore`, где **nestedStore** - идентификатор вложенного хранилища.

**Возвращаемые значения**  
Запрашиваемый объект, или `null` в случае ошибки, или если объект не найден


### $db.GetAll
Метод $db.GetAll() возвращает все объекты из хранилища. 

**Синтаксис**  

```
$db.GetAll([store])
```  

**Параметры**

**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище. 

**Возвращаемые значения**  
Массив объектов, или `null` в случае ошибки.


### $db.GetAllStrings
Метод $db.GetAllStrings() возвращает все объекты в виде строк (JSON) из хранилища. 

**Синтаксис**  

```
$db.GetAllStrings([store])
```  

**Параметры**

**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище. 

**Возвращаемые значения**  
Массив строк (JSON), или `null` в случае ошибки.


### $db.Set
Метод $db.Set() сохраняет объект в хранилище. 

**Синтаксис**  

```
$db.Set(data[, store])
```  

**Параметры**

**data**   
    Объект для сохранения (Javascript object).  Должен иметь свойство `_id`   
**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище.  Для сохранения во вложенном хранилище, используется следующий синтаксис: `[store].nestedStore`, где **nestedStore** - идентификатор вложенного хранилища.

**Возвращаемые значения**  
`null` или описание ошибки в виде строки.


### $db.Insert
Метод $db.Insert() создает новый объект в хранилище, возвращает новый идентификатор объекта.  

**Синтаксис**  

```
$db.Insert(data[, store])
```  

**Параметры**

**data**   
    Объект для сохранения (Javascript object).  Свойство `_id` будет присвоено автоматически  
**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище.  

**Возвращаемые значения**  
Индентификатор объекта, или `null` в случае ошибки.


### $db.Delete
Метод $db.Delete() удаляет объект из хранилища.  

**Синтаксис**  

```
$db.Delete(_id[, store])
```  

**Параметры**

**_id**   
    Идентификатор объекта (строка)  
**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище. 

**Возвращаемые значения**  
`null` или описание ошибки в виде строки.


### $db.NextSequence
Метод $db.NextSequence() возвращает следующее автоинкрементное значение для хранилища.  

**Синтаксис**  

```
$db.NextSequence([store])
```  

**Параметры**

**store**  
    Идентификатор хранилища (строка, опционально). По умолчанию используется текущее хранилище.  

**Возвращаемые значения**  
Число, или `null` в случае ошибки.


### $db.Notify
Метод $db.Notify() создает и отправляет уведомления.  

**Синтаксис**  

```
$db.Notify(receivers, store, message)
```  

**Параметры**

**receivers**  
    Идентификаторы получателей (массив строк).   
    
**store**  
    Идентификатор хранилища (строка).  
    
**message**  
    Сообщение (строка или объект). Объект имеет следующую структуру:  

```
{
	message: "Заголовок сообщения",
	details: "Текст сообщения",
	relatedObjects: [
		{
			name: "Gray Wolf",
			_id: "9bb8147f-7bd2-402f-a62d-e67af9ddd246",
			mode: "link",
			store: "feedback"
		}
	]
}
```   
Где `relatedObjects` - массив объектов, которые будут приложены к уведомлению.  
В случае, если сообщение передано строкой, строка будет помещена в свойство `message`.   
**Возвращаемые значения**  
Число, или `null` в случае ошибки.

### $db.NewId
Метод $db.NewId() возвращает новый UUID v4.  

**Синтаксис**  

```
$db.NewId()
```  

**Возвращаемые значения**  
Новый UUID v4 в виде строки.